#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#include "Inputs.h"
#include "ManejoStructs.h"
#include "Menus.h"

#define MAXClientes 100
#define MAXPedidos 100


int main() {
	setbuf(stdout, NULL);
	int opcionMenuPrincipal;
	eCliente listaClientes[MAXClientes];
	ePedido listaPedidos[MAXPedidos];

	int retornoFuncion;
	int idCliente;
	int idIngresado;
	int idPedido;

	idCliente = 1000;



	InicializarClientes(listaClientes, MAXClientes);
	InicializarPedidos(listaPedidos, MAXPedidos);

	do{
		opcionMenuPrincipal = MostrarMenuPrincipal("", 1, 10, "La opcion ingresada no existe, intente nuevamente.\n");
		switch (opcionMenuPrincipal){
			case 1: //Alta Cliente
				retornoFuncion = BuscarEspacioLibre(listaClientes, MAXClientes);
				if(retornoFuncion != -1){
					CargarNuevoCliente(listaClientes, MAXClientes, &idCliente);
					retornoFuncion = MostrarUnCliente(listaClientes, MAXClientes, idCliente);
				}
				break;
			case 2: //Modificar Cliente
				idIngresado = GetInt("Por favor, ingrese el ID del cliente: \n", 0, 1000000, "El ID ingresado no existe.");
				if (BuscarClientePorId(listaClientes, MAXClientes, idIngresado) != -1){
					retornoFuncion = ModificarDireccion(listaClientes, MAXClientes, idIngresado, "Por favor, ingrese la nueva direccion: \n");
					retornoFuncion = ModificarLocalidad(listaClientes, MAXClientes, idIngresado, "Por favor, ingrese la nueva localidad: \n");
				}
				else{
					printf("No se ha encontrado el usuario solicitado. Intente nuevamente: \n");
				}
				break;
			case 3: //Baja Cliente
				idIngresado = GetInt("Por favor, ingrese el ID del cliente: \n", 0, 1000000, "El ID ingresado no existe.");
				if (BuscarClientePorId(listaClientes, MAXClientes, idIngresado) != -1){
					retornoFuncion = EliminarCliente(listaClientes, MAXClientes, idIngresado);
					if(retornoFuncion != -1){
						printf("El cliente ha sido dado de baja exitosamente. \n");
					}
					else{
						printf("El cliente no ha sido encontrado, intente nuevamente. \n");
					}
				}
				break;
			case 4:
				retornoFuncion = CrearPedidoDeRecoleccion(listaClientes, MAXClientes, listaPedidos, MAXPedidos, &idPedido);
				if(retornoFuncion == 0){
					printf("El pedido se ha cargado exitosamente");
				}
				break;
			case 5:
			case 6:
			case 7:
			case 8:
			case 9:
			case 10:
			case 11:
				break;
		}


	}while(opcionMenuPrincipal != 11);

	return 0;
}
